<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Api filme</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <style>
        .centralizar{
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .div_linha {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
        }
    </style>
</head>
<body>
    <div id="conteiner">
        <div id="header">
            <div class="navbar">
                <div class="navbar-inner">
                    <div class="container">
                        <a class="brand" href="apiFilme.html">
                            Pesquisa de Filmes
                        </a>
                        
                        <form class="navbar-search pull-right">
                            <input type="text" class="search-query" placeholder="Search">
                          </form>
                    </div>
                </div>
                </div>
        </div>
        <div id="filmes">
            <div class="div_linha">
                <div class="div_linha">
                    <img src="" alt="">
                    <h2 class="title">
                    </h2>
                    <p></p>
                </div>
            </div>
        </div>
    </div>
    <script>
        urlBase = "https://api.themoviedb.org/3"
        apiKey = "eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJkNGYzMTUwODE2ZmNhNTg1MTdmNGJjY2I0NjlkMTI5YyIsIm5iZiI6MTc0NTM1OTQxMS4yMzMsInN1YiI6IjY4MDgxMjMzNmUxYTc2OWU4MWVlYzM3YiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.FIsgED0PKLQAafsaiw4hvOqL1iMnoccqjkJXTzLs_Ho"

        inputFilme = document.querySelector("#inputFilme")
        btnBuscar = document.querySelector("#btnBuscar").addEventListener("click", buscaFilme)
        listaFilmes = document.querySelector("#listaFilmes")

        function buscaFilme(){
            const options = {
                method: 'GET',
                headers: {
                    accept: 'application/json',
                    Authorization: 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJkNGYzMTUwODE2ZmNhNTg1MTdmNGJjY2I0NjlkMTI5YyIsIm5iZiI6MTc0NTM1OTQxMS4yMzMsInN1YiI6IjY4MDgxMjMzNmUxYTc2OWU4MWVlYzM3YiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.FIsgED0PKLQAafsaiw4hvOqL1iMnoccqjkJXTzLs_Ho'
                } ,
            };

            fetch('https://api.themoviedb.org/3/authentication', options)
                .then(res => res.json())
                .then(res => console.log(res))
                .catch(err => console.error(err));
            
            listaHtml = ''

            fetch(urlBase + '/search/movie?query=' + inputFilme.value, options)
                .then((r)=> {return r.json()})
                .then((o)=>{
                    console.log(o)
                    o.results.forEach(element => {
                        listaHtml += addMovieList(element)
                    });
                    document.querySelector("#listaFilmes").innerHTML= listaHtml
                })
        }
    </script>
</body>
</html>
